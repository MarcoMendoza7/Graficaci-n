<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sovel</title>
</head>
<body>
    <canvas id="canvas"></canvas>

    <canvas id="resultado"></canvas>

    <script type="text/javascript">

    var image = new Image();
    image.onload = imageLoaded;
    image.src = "Marco.jpeg";

    function imageLoaded(){
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext("2d");

        canvas.width = image.width;
        canvas.height = image.height;

        ctx.drawImage(image, 0, 0, image.width, image.height)

        blancoYNegro(canvas);

        var resultado = document.getElementById("resultado")
        convolucionar(canvas, resultado)

    }

    function blancoYNegro(canvas){
        var ctx = canvas.getContext("2d");
        var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)
        var pixeles = imgData.data;

        console.log(imgData)

        for (var p=0; p < pixeles.length; p +=4){
            var rojo = pixeles[p];
            var verde = pixeles[ p + 1];
            var azul = pixeles [p + 2 ];
            var alpha = pixeles[p + 3];

            var gris = (rojo + verde + azul) / 3

            // rojo: 50, verde: 120, azul:230
            //gris = (50 + 120 + 230) / 3 = 400/3 = 133.33

            pixeles[p] = gris;
            pixeles[p + 1] = gris;
            pixeles[p + 2] = gris;

        }

        ctx.putImageData(imgData, 0, 0);
        
    }

    function convolucionar(canvasFuente, canvasDestino){
        // obtener todas las variables necesarias
        var ctxFuente =     
    }

    </script>

</body>
</html>